(function(t){function e(e){for(var n,i,a=e[0],c=e[1],l=e[2],d=0,h=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&h.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,a=1;a<o.length;a++){var c=o[a];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},s={app:0},r=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"035f":function(t,e,o){"use strict";o("e7af")},"081d":function(t,e,o){},"0895":function(t,e,o){t.exports=o.p+"img/google.dfb46a07.svg"},"0e1a":function(t,e,o){},1765:function(t,e,o){},"193f":function(t,e,o){t.exports=o.p+"img/MagnifyingGlass.41734922.svg"},"19b3":function(t,e,o){"use strict";o("9af0")},"1d3b":function(t,e,o){},"1f43":function(t,e,o){t.exports=o.p+"img/BooksImage.9edcab46.svg"},2437:function(t,e,o){},"24a2":function(t,e,o){t.exports=o.p+"img/books.df0b6b4a.svg"},"353c":function(t,e,o){t.exports=o.p+"img/reading_online.2fcec9d3.svg"},"3f73":function(t,e,o){t.exports=o.p+"img/sun.29daa500.svg"},"40af":function(t,e,o){},"40c3":function(t,e,o){"use strict";o("e03b")},4254:function(t,e,o){"use strict";o("eac9")},4339:function(t,e,o){},4645:function(t,e,o){"use strict";o("1765")},"480b":function(t,e,o){},"4b80":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("router-view"),"/dashboard"==t.$route.path||t.$route.path.startsWith("/read")?t._e():o("Footer")],1)},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("div",{staticClass:"logo-container"},[n("img",{attrs:{src:o("a73c")}}),t._v(" © Copyright "+t._s((new Date).getFullYear())+" "),n("p",{staticClass:"title bold"},[t._v("Book")]),n("p",{staticClass:"title italic"},[t._v("Splore")])])])},a=[],c={name:"Footer"},l=c,u=(o("19b3"),o("2877")),d=Object(u["a"])(l,i,a,!1,null,"0887b4a6",null),h=d.exports,f={name:"App",components:{Footer:h}},v=f,p=Object(u["a"])(v,s,r,!1,null,"14a6aefe",null),g=p.exports,m=o("8c4f"),b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{height:"100%"}},[o("nav-bar",{attrs:{fixed:!1}}),o("landing-page")],1)},w=[],k=o("1da1"),_=(o("96cf"),o("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.cssVars(),attrs:{id:"nav"}},[n("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}}),n("table",[n("tr",[n("td",{staticClass:"logo-container",on:{click:function(e){return t.redirectToHome()}}},[n("img",{attrs:{src:o("a73c")}}),n("p",{staticClass:"title bold"},[t._v("Book")]),n("p",{staticClass:"title italic"},[t._v("Splore")])]),n("transition",{attrs:{name:"slide"}},[!t.isMobile||t.showMenu&&t.menuShown?n("td",{staticClass:"button-container",on:{blur:function(e){t.showMenu=!1}}},["landingpage"==t.navbar_type?n("div",{staticClass:"signup-container"},[n("a",{staticClass:"signup-link",attrs:{href:this.$backend_url+"/login"}},[t._v(" Sign In With "),n("img",{attrs:{src:o("0895"),width:"23",height:"23"}})])]):t._e(),"landingpage"!=t.navbar_type?n("div",{staticClass:"link-container"},[t.fetched?n("a",{staticClass:"currPfpOut",attrs:{href:"/user/"+t.currentUser_.id}},[n("img",{staticClass:"currentUserPfp",attrs:{src:t.currentUser_.avatar_url}}),t.isMobile?n("i",[t._v("Your profile")]):t._e()]):t._e(),"dashboard"==t.navbar_type?n("a",{staticClass:"logout-link",on:{click:t.logout}},[t._v(" Logout ")]):t._e(),"dashboard"!==t.navbar_type?n("router-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")]):t._e(),n("router-link",{attrs:{to:"/explore"}},[t._v("Explore")])],1):t._e()]):t._e()]),t.isMobile?n("td",{staticClass:"mobileIcon"},[n("i",{staticClass:"fa fa-bars",on:{click:function(e){t.showMenu=!t.showMenu}}})]):t._e()],1)])])}),y=[],C=(o("c7cd"),{name:"NavBar",props:{fixed:{type:Boolean,default:!1},navbar_type:{type:String,default:"landingpage"},currentUser:{type:Object}},data:function(){return{fetched:!1,currentUser_:{},isMobile:screen.width<=600,showMenu:!1,menuShown:!0,lastScrollPosition:0}},methods:{cssVars:function(){return{"--position":this.fixed?"fixed":"relative"}},redirectToHome:function(){this.$router.push("/")},logout:function(){window.localStorage.removeItem("token"),this.$router.push("/?msg=You have successfully logged out")},onScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop;t<0||(this.menuShown=t<this.lastScrollPosition,this.lastScrollPosition=t)}},created:function(){var t=this;if(this.currentUser)return this.currentUser_=this.currentUser,void(this.fetched=!0);fetch(this.$backend_url+"/users/get",{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(e){t.currentUser_=e,t.fetched=!0})).catch((function(t){console.error("current user: ",t)}))},mounted:function(){window.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}}),x=C,S=(o("b9d5"),Object(u["a"])(x,_,y,!1,null,"40c606cf",null)),B=S.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"section1 section"},[n("div",{staticClass:"circle",style:t.scaleRadius(900)},[n("div",{staticClass:"textTitle",style:t.scaleFont(60)},[n("img",{staticClass:"logo",attrs:{src:o("a73c"),width:"50px",height:"50px"}}),n("p",{staticClass:"title bold"},[t._v("Book")]),n("p",{staticClass:"title italic"},[t._v("Splore")])]),n("p",{staticClass:"welcomeWords",style:t.scaleFont(55)},[t._v(" A platform for you to explore books with your friends! ")]),n("p",{staticClass:"grayWords",style:t.scaleFont(30)},[t._v(" Experience a whole new world of books, all in your browser! ")]),n("a",{attrs:{href:t.backend_url+"/login"}},[n("button",{staticClass:"get-started-button",style:t.scaleFont(25)},[t._v(" Get Started Now! ")])])]),n("img",{staticClass:"sun-img",attrs:{src:o("3f73"),width:t.scaleDownHeight(250)+"px",height:t.scaleDownHeight(250)+"px"}}),n("img",{staticClass:"reading-img",attrs:{src:o("1f43"),height:t.scaleDownHeight(450)+"px",width:t.scaleDownHeight(900)+"px"}})]),n("div",{staticClass:"section2 section"},[n("div",{staticClass:"outer1",staticStyle:{width:"100%"}},[n("p",{staticClass:"outer1-text",style:t.scaleFont(60)},[t._v(" Acquaint yourself with books you never knew about ")])]),n("div",{staticClass:"outer2"},[n("img",{staticClass:"reading_online",attrs:{src:o("353c"),width:t.scaleDownHeight(700),height:t.scaleDownHeight(400)}}),n("div",{staticClass:"bottomLeft",style:t.scaleFont(35)},[n("p",{staticClass:"unstyled-welcome"},[t._v(" Well, what are you waiting for? ")]),n("p",{staticClass:"createAccount"},[n("a",{attrs:{href:t.backend_url+"/login"}},[t._v(" Create an account on BookSplore for free! ")])])]),n("p",{staticClass:"topRight",style:t.scaleFont(35)},[t._v(" Browse through hundreds of books, review your favourite reads, and follow your friends’ progress, right in the comfort of your browser! ")]),n("img",{staticClass:"bottomRight",attrs:{src:o("24a2"),width:t.scaleDownHeight(700)}})])])])},j=[],T={name:"LandingPage1",data:function(){return{backend_url:this.$backend_url}},methods:{scaleDownHeight:function(t){return window.innerHeight*t/796},scaleDownWidth:function(t){return window.innerWidth*t/1536},scaleRadius:function(t){return{width:"".concat(window.innerHeight*t/796,"px"),height:"".concat(window.innerHeight*t/796,"px")}},scaleFont:function(t){return{"font-size":"".concat(window.innerHeight*t/796,"px")}}}},D=T,O=(o("e980"),Object(u["a"])(D,$,j,!1,null,"3517deeb",null)),U=O.exports,R={name:"Home",components:{NavBar:B,LandingPage:U},methods:{getHeight:function(){return{height:"".concat(window.innerHeight,"px")}},sleep:function(t){return new Promise((function(e){return setTimeout(e,t)}))}},mounted:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=window.localStorage.getItem("token"),o&&fetch(t.$backend_url+"/users/current",{headers:{Authorization:o}}).then((function(e){200==e.status&&t.$router.push("/dashboard")})),e.next=4,t.sleep(150);case 4:n=t.$route.query.msg,n&&(window.history.pushState("","","/"),alert(n));case 6:case"end":return e.stop()}}),e)})))()}},I=R,E=Object(u["a"])(I,b,w,!1,null,null,null),L=E.exports,A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.fetched?o("div",{staticClass:"bookInfo",style:t.cssVars(t.bookData)},[o("auth-component"),o("nav-bar",{attrs:{fixed:!1,navbar_type:"authenticated",currentUser:t.currentUser}}),o("div",{staticClass:"bookInfoMain"},[o("book-info-display",{attrs:{Book:t.bookData}}),o("div",{staticClass:"downloadButtons"},[o("button",{attrs:{id:"pdf"},on:{click:function(e){return t.readOnline()}}},[t._v(" Read Online ")]),o("button",{attrs:{id:"WebReader"},on:{click:function(e){return t.getWebReader(t.bookData.preview_link)}}},[t._v(" Preview ")])]),o("div",{staticClass:"bottomSection"},[o("book-reviews",{attrs:{bookData:t.bookData,currentUser:t.currentUser}}),o("more-by-author",{attrs:{mainBook:t.bookData}})],1)],1)],1):t._e()},P=[],F=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bookInfoDisplay"},[o("div",{staticClass:"top"},[o("Cover",{attrs:{imgUrl:t.bookData.cover,width:"230px"}}),o("div",{staticClass:"info"},[o("div",{staticClass:"head"},[o("p",{staticClass:"title"},[t._v(t._s(t.bookData.title))]),o("p",{staticClass:"belowTitle"},[t._v(" Written by "+t._s(t.bookData.author)+" | Published in "+t._s(t.bookData.published.getFullYear())+" ")])]),o("div",{staticClass:"infoTable"},[o("div",{staticClass:"left"},[o("div",[o("p",{staticClass:"lable"},[t._v("Published")]),o("p",{staticClass:"notLable"},[t._v(" "+t._s(t.bookData.published?t.bookData.published.toDateString().slice(4):"-")+" ")])]),o("div",[o("p",{staticClass:"lable"},[t._v("Publisher")]),o("p",{staticClass:"notLable"},[t._v(" "+t._s(t.bookData.publisher?t.bookData.publisher:"-")+" ")])]),o("div",[o("p",{staticClass:"lable"},[t._v("Page count")]),o("p",{staticClass:"notLable"},[t._v(" "+t._s(t.bookData.pageCount?t.bookData.pageCount:"-")+" ")])]),o("div",[o("p",{staticClass:"lable"},[t._v("Language")]),o("p",{staticClass:"notLable"},[t._v(" "+t._s(t.bookData.language?t.bookData.language:"-")+" ")])])]),o("div",{staticClass:"right"},[o("div",[o("p",{staticClass:"lable"},[t._v("Ratings")]),o("p",{staticClass:"notLable"},[t._v(" "+t._s(t.bookData.ratings?t.bookData.ratings:"-")+" ")])]),o("div",[o("p",{staticClass:"lable"},[t._v("Average Rating")]),o("p",{staticClass:"notLable"},[t._v(" "+t._s(t.bookData.avgRating?t.bookData.avgRating:"-")+" ")])]),o("div",[o("p",{staticClass:"lable"},[t._v("ISBN")]),o("p",{staticClass:"notLable"},[t._v(" "+t._s(t.bookData.isbn)+" ")])])])])])],1),o("div",{staticClass:"descDiv"},[t.bookData.description?o("p",{ref:"desc",staticClass:"desc"},[t._v(" "+t._s(t.bookData.description.slice(0,t.descMaxSize))+" . . . . ")]):o("p",{staticClass:"noDesc",staticStyle:{color:"gray"}},[t._v(" No description provided ")]),o("p",{ref:"descExpand",staticClass:"descExpand",on:{click:function(e){return t.descMode(t.bookData.description)}}},[t._v(" Expand ")])])])},H=[],z=(o("a15b"),o("a4d3"),o("e01a"),o("fb6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{staticClass:"cover",style:t.cssVars(t.width,t.height),attrs:{src:t.imgUrl?t.imgUrl:o("a73c")}})}),N=[],M={name:"Cover",props:{imgUrl:{default:o("a73c")},width:{type:String,default:"250px"},height:{type:String,default:"350px"}},methods:{cssVars:function(t,e){return{"--width":t,"--height":e}}}},q=M,W=(o("d33c"),Object(u["a"])(q,z,N,!1,null,"11cca728",null)),G=W.exports,Y={name:"BookInfoDisplay",components:{Cover:G},props:["Book"],data:function(){return{bookData:{cover:this.Book.image_links&&this.Book.image_links.thumbnail?this.Book.image_links.thumbnail:o("a73c"),title:this.Book.title,author:this.Book.authors?this.Book.authors.join(", "):"Anonymous",published:this.Book.publish_date?new Date(this.Book.publish_date):"None",publisher:this.Book.publisher,language:this.Book.language,pageCount:this.Book.page_count,ratings:this.Book.total_ratings,avgRating:this.Book.avg_rating,reviewsAmount:this.Book.review_count,description:this.Book.description,isbn:this.Book.isbns&&this.Book.isbns[0]?this.Book.isbns[0].identifier:"-"},descExpanded:!1,descMaxSize:300}},methods:{descMode:function(t){this.descExpanded?this.collapse(t):this.expand(t),this.descExpanded=!this.descExpanded},expand:function(t){this.$refs.desc.innerHTML=t,this.$refs.descExpand.innerHTML="Collapse"},collapse:function(t){this.$refs.desc.innerHTML=t.slice(0,this.descMaxSize)+" . . . .",this.$refs.descExpand.innerHTML="Expand"},scaleDownHeight:function(t){return window.innerHeight*t/796},scaleDownWidth:function(t){return window.innerWidth*t/1536},scaleRadius:function(t){return{width:"".concat(window.innerHeight*t/796,"px"),height:"".concat(window.innerHeight*t/796,"px")}},scaleFont:function(t){return{"font-size":"".concat(window.innerHeight*t/796,"px")}}},mounted:function(){this.collapse(this.bookData.description)}},V=Y,J=(o("760d"),Object(u["a"])(V,F,H,!1,null,"66630712",null)),Q=J.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.fetched?n("div",{staticClass:"bookReviewMain"},[n("div",{staticClass:"reviewTitle"},[t._v("Reviews")]),n("div",{staticClass:"addReview"},[n("div",{staticClass:"addReviewTop"},[n("div",{staticClass:"left"},[n("div",{staticClass:"top"},[t._v(" Reviewing "),n("a",{staticClass:"bookName"},[t._v(t._s(t.bookData.title))])]),n("div",{staticClass:"belowTop"},t._l(t.newReviewStars,(function(e,s){return n("img",{key:s,attrs:{src:o(e?"da9e":"918b")},on:{click:function(e){t.newReviewStars=t.changeStars(s)}}})})),0)]),n("button",{on:{click:function(e){t.postReview(t.$router,t.$backend_url,{content:t.newReview,book_id:t.bookData.id,stay_anonymous:t.stay_anonymous,rating:t.newReviewStars.reduce((function(t,e){return t+e}),0)})}}},[t._v(" Publish ")])]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newReview,expression:"newReview"}],attrs:{cols:"30",rows:"10",placeholder:"Publish a public review...."},domProps:{value:t.newReview},on:{input:function(e){e.target.composing||(t.newReview=e.target.value)}}})]),t._l(t.reviews,(function(e,o){return n("Review",{key:o,attrs:{raw_review:e,currentUser:t.currentUser}})}))],2):t._e()},X=[],Z=(o("498a"),o("3ca3"),o("ddb0"),o("9861"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"review"},[n("div",{staticClass:"reviewHead"},[n("div",{staticClass:"headLeft"},["book"===t.coverType?n("img",{staticClass:"pfp",attrs:{src:t.review.imageUrl}}):n("Cover",{attrs:{imgUrl:t.review.imageUrl,height:t.coverHeight,width:"75px"}}),n("div",[n("div",{staticClass:"userDate"},[n("a",{attrs:{href:t.review.link}},[t._v(" "+t._s(t.review.user)+" ")]),n("p",[t._v(" Posted on "+t._s(t.review.postDate.toDateString().slice(4))+" ")])]),n("div",{staticClass:"stars"},t._l(t.renderStars(t.review.stars),(function(t,e){return n("img",{key:e,staticStyle:{height:"20px"},attrs:{src:t}})})),0)])],1),"book"!==t.coverType||t.raw_review.user.id!==t.currentUser.id&&![1,2,3,4].includes(t.currentUser.id)?t._e():n("img",{staticClass:"deleteIcon",attrs:{src:o("ed3a")},on:{click:function(e){return t.deleteReview(t.$router,t.$backend_url,t.raw_review)}}})]),n("div",{staticClass:"reviewDesc"},[t._v(" "+t._s(t.descLength?t.review.reviewDesc.slice(0,t.descLength)+"....":t.review.reviewDesc)+" ")])])}),tt=[],et=o("d4ec"),ot=(o("9911"),o("a9e3"),function t(e,o,n,s,r,i){Object(et["a"])(this,t),this.user=e,this.link=i,this.postDate=o,this.stars=n,this.imageUrl=s,this.reviewDesc=r}),nt={name:"Review",props:{raw_review:Object,coverType:{type:String,default:"book"},descLength:Number,currentUser:Object},components:{Cover:G},data:function(){return{review:{},coverHeight:screen.width<=760?"30vw":"116px"}},methods:{deleteReview:function(t,e,o){fetch(e+"/books/review?review_id=".concat(o.id),{headers:{Authorization:window.localStorage.getItem("token")},method:"DELETE"}).then((function(t){return t.json()})).then((function(e){console.log(e),t.go(0)})).catch((function(t){console.error(t)}))},renderStars:function(t){var e=o("da9e"),n=o("918b");if(!(t>5)){for(var s=[],r=0;r<t;r++)s.push(e);for(var i=0;i<5-t;i++)s.push(n);return s}console.error("Invalid Amount of stars: ".concat(t))},formatReviews:function(t,e){return"book"===t?new ot(e.user.username,new Date(e.timestamp),e.rating,e.user.avatar_url,e.content,"/user/".concat(e.user.id)):new ot(e.book_data.title,new Date(e.timestamp),e.rating,e.book_data.image_links.thumbnail,e.content,"/book-info/".concat(e.book_id))}},created:function(){this.review=this.formatReviews(this.coverType,this.raw_review)}},st=nt,rt=(o("9666"),Object(u["a"])(st,Z,tt,!1,null,"4b41050a",null)),it=rt.exports,at={name:"BookReviews",props:["bookData","currentUser"],components:{Review:it},data:function(){return{reviews:[],newReview:"",fetched:!1,newReviewStars:[0,0,0,0,0],stay_anonymous:!1}},methods:{postReview:function(t,e,o){o.content&&""!==o.content.trim()&&fetch(e+"/books/review",{headers:{Authorization:window.localStorage.getItem("token")},method:"POST",body:new URLSearchParams(o)}).then((function(t){return t.json()})).then((function(e){console.log(e),t.go(0)})).catch((function(t){console.error(t)}))},changeStars:function(t){if(console.log(t),!(t>4)){for(var e=[],o=0;o<5;o++)e.push(t-o>=0);return console.log(e),e}console.error("Invalid Amount of stars: ".concat(t))}},created:function(){var t=this;fetch(this.$backend_url+"/books/reviews?book_id=".concat(this.bookData.id)).then((function(t){return t.json()})).then((function(e){console.log(e),t.reviews=e,t.fetched=!0})).catch((function(t){console.error("book reviews",t)}))}},ct=at,lt=(o("035f"),Object(u["a"])(ct,K,X,!1,null,"1ec55e97",null)),ut=lt.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.fetched?n("div",{staticClass:"moreBook"},[n("p",{staticClass:"top"},[t._v("Similar Book")]),n("a",{attrs:{href:"/book-info/"+t.book.id}},[n("Cover",{attrs:{imgUrl:t.book.image_links?t.book.image_links.thumbnail:o("a73c"),height:"25vw",width:"17vw"}})],1),n("p",{staticClass:"bookTitle"},[t._v(t._s(t.book.title))])]):t._e()},ht=[],ft=(o("4de4"),{name:"MoreByAuthor",components:{Cover:G},props:["mainBook"],methods:{filterMoreByAuthor:function(t,e){var o=t.filter((function(t,o,n){return t.id!==e.id}));return o[Math.floor(Math.random()*o.length)]}},data:function(){return{fetched:!1,book:{}}},mounted:function(){var t=this;console.log(this.mainBook),fetch(this.$backend_url+"/books/search?query=inauthor:".concat(this.mainBook.authors[0],"&limit=15&download=false&sorting=relevance"),{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(e){console.log(e),t.book=t.filterMoreByAuthor(e,t.mainBook),t.fetched=!0})).catch((function(t){console.error("more book search : ",t)}))}}),vt=ft,pt=(o("fea6"),Object(u["a"])(vt,dt,ht,!1,null,"0bf821c4",null)),gt=pt.exports,mt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{width:"0",height:"0"}})},bt=[],wt={name:"AuthComponent",created:function(){var t=this,e=window.localStorage.getItem("token");e||this.$route.query.token||this.$router.push("/?msg=You are not logged in. Please authenticate yourself to continue"),fetch(this.$backend_url+"/users/current",{headers:{Authorization:e}}).then((function(e){200!=e.status&&(window.localStorage.removeItem("token"),t.$router.push("/?msg=You are not logged in. Please authenticate yourself to continue"))})).catch((function(e){window.localStorage.removeItem("token"),t.$router.push("/?msg=You are not logged in. Please authenticate yourself to continue"),console.error(e)}))}},kt=wt,_t=Object(u["a"])(kt,mt,bt,!1,null,null,null),yt=_t.exports,Ct={name:"BookInfo",components:{NavBar:B,BookInfoDisplay:Q,BookReviews:ut,MoreByAuthor:gt,AuthComponent:yt},data:function(){return{bookData:{},fetched:!1,currentUser:{}}},methods:{readOnline:function(){this.bookData.pdf.acsTokenLink&&(window.location.href="/read/".concat(this.bookData.isbns[0].identifier))},getWebReader:function(t){t&&(window.location.href=t)},cssVars:function(t){var e={background:"#7fb6f8",font:"black"},o={background:"#95979A",font:"#444444"};return{"--pdf-button-color":t.pdf.acsTokenLink?e.background:o.background,"--WebReader-button-color":t.preview_link?e.background:o.background,"--pdf-font-color":t.pdf.acsTokenLink?e.font:o.font,"--WebReader-font-color":t.preview_link?e.font:o.font}}},created:function(){var t=this;fetch(this.$backend_url+"/books/get?book_id=".concat(this.$route.params.id),{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(e){return e.ok||t.$router.push("/404"),e.json()})).then((function(e){console.log(e),t.bookData=e,fetch(t.$backend_url+"/users/get",{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(e){t.currentUser=e,console.log("current user :",t.currentUser),t.fetched=!0})).catch((function(t){console.error("current user: ",t)}))})).catch((function(e){t.$router.push("/404"),console.error(e)}))}},xt=Ct,St=(o("aec0"),Object(u["a"])(xt,A,P,!1,null,"1e80e24f",null)),Bt=St.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard"},[n("auth-component"),n("nav-bar",{attrs:{fixed:!0,navbar_type:"dashboard"}}),n("div",{staticClass:"mainStuff"},[n("div",{staticClass:"recentWraper"},[n("recent-books")],1),n("table",[n("tr",[n("td",[n("p",{staticClass:"activityTitle"},[t._v(" All Activity ")]),t.events.length>0?n("div",{staticClass:"events-container"},t._l(t.events,(function(t,e){return n("Event",{key:e,attrs:{user:t.user,userUrl:t.userUrl,eventType:t.eventType,eventDescription:t.eventDescription,eventTarget:t.eventTarget,imageUrl:t.imageUrl,myProfileUrl:t.myProfileUrl,url:t.url}})})),1):t._e(),0==t.events.length?n("div",{staticClass:"not-found-container"},[n("p",{staticStyle:{margin:"auto","margin-bottom":"20px"}},[t._v(" Looks like you don't have any activity to show. Try searching for books, or following users on our "),n("router-link",{staticClass:"link-to-explore",attrs:{to:"/explore"}},[t._v("Explore page")]),t._v("! ")],1),n("img",{staticStyle:{margin:"auto"},attrs:{src:o("c0e2"),width:"500px",height:"500px"}})]):t._e()])])])])],1)},jt=[],Tt=o("b85c"),Dt=(o("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.fetched?n("div",{staticClass:"recent"},[n("p",{staticClass:"readsTitle"},[t._v("Your Reads")]),t.books.length>0?n("div",{staticClass:"bookList"},t._l(t.books,(function(e,s){return n("div",{key:s,staticClass:"book"},[n("img",{attrs:{src:e.image_links&&e.image_links.smallThumbnail?e.image_links.smallThumbnail:o("a73c"),height:t.scaleHeight(45)}}),n("a",{style:t.scaleFont(13),attrs:{href:"/book-info/"+e.book_id}},[t._v(" "+t._s(e.title.length>29?e.title.slice(0,20)+" . . .":e.title)+" ")])])})),0):t._e(),t.books.length?t._e():n("div",{staticStyle:{color:"white","font-family":"Lato"}},[t._v(" No books read recently ")])]):t._e()}),Ot=[],Ut={name:"RecentBooks",data:function(){return{books:null,fetched:!1,window:window}},methods:{scaleFont:function(t){return{"font-size":"".concat(t*window.innerWidth/800,"px")}},scaleHeight:function(t){return t*window.innerHeight/796}},created:function(){var t=this;fetch(this.$backend_url+"/users/get",{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(e){fetch(t.$backend_url+"/users/recent-books?user_id=".concat(e.id),{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(e){t.books=e,t.fetched=!0}))}))}},Rt=Ut,It=(o("d7c9"),Object(u["a"])(Rt,Dt,Ot,!1,null,"c3264d3a",null)),Et=It.exports,Lt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"event"},[o("div",{staticClass:"eventMsg"},[o("img",{staticClass:"performer-pfp",attrs:{src:t.myProfileUrl}}),o("p",{staticClass:"event-desc",attrs:{name:"action"}},[o("router-link",{staticClass:"performer-url",attrs:{to:t.userUrl}},[t._v(t._s(t.user.slice(0,-5)))]),t._v(" "+t._s("follow"==t.eventType?"started following":"reviewed")+" ")],1),o("a",{staticClass:"targetLink",attrs:{name:"target",href:t.url}},[t._v(t._s("follow"==t.eventType?"@":"")+t._s("follow"==t.eventType?t.eventTarget.slice(0,-5):t.eventTarget))])]),o("div",{staticClass:"eventBox"},[o("div",{staticClass:"userInfo"},[o("img",{attrs:{src:t.imageUrl}}),o("div",[o("a",{staticClass:"targetName",attrs:{name:"targetName"}},[t._v(" "+t._s(t.window.innerWidth>600?t.eventTarget.slice(0,40)+(t.eventTarget.length>40?". . .":""):t.eventTarget.slice(0,20)+(t.eventTarget.length>20?". . .":""))+" ")]),o("p",{staticClass:"targetInfo",attrs:{name:"targetInfo"}},[t._v(" "+t._s(t.eventDescription)+" ")])])]),o("a",{attrs:{href:"/"}},[o("router-link",{staticClass:"action",attrs:{to:t.url}},[t._v("View")])],1)])])},At=[],Pt={name:"Event",props:{user:String,userUrl:String,eventType:String,eventDescription:String,eventTarget:String,imageUrl:String,url:String,myProfileUrl:String},data:function(){return{window:window}}},Ft=Pt,Ht=(o("40c3"),Object(u["a"])(Ft,Lt,At,!1,null,"19a88f8a",null)),zt=Ht.exports,Nt=function t(e,o,n,s,r,i,a,c){Object(et["a"])(this,t),this.user=e,this.userUrl=o,this.eventType=n,this.eventDescription=s,this.eventTarget=r,this.imageUrl=i,this.url=a,this.myProfileUrl=c},Mt={name:"Dashboard",components:{RecentBooks:Et,NavBar:B,AuthComponent:yt,Event:zt},created:function(){var t=this,e=this.$route.query.token;e&&(window.localStorage.setItem("token","".concat(e)),this.$router.push("dashboard")),fetch(this.$backend_url+"/users/events",{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(e){var n,s=Object(Tt["a"])(e);try{for(s.s();!(n=s.n()).done;){var r=n.value;if("follow-you"==r.type||"follow-user"==r.type)t.events.push(new Nt(r.performer.username,"/user/".concat(r.performer.id),"follow","".concat(r.target_user.total_reviews," reviews, ").concat(r.target_user.followers," followers"),r.target_user.username,r.target_user.avatar_url,"/user/".concat(r.target_user.id),r.performer.avatar_url));else{var i=!1;try{i=JSON.parse(r.target_book.image_links)&&!!r.target_book.image_links}catch(a){i=!1}t.events.push(new Nt(r.performer.username,"/user/".concat(r.performer.id),"review",t.renderStars(r.rating_given),r.target_book.title,i?JSON.parse(r.target_book.image_links).thumbnail:o("a73c"),"/book-info/".concat(r.target_book.book_id),r.performer.avatar_url))}}}catch(c){s.e(c)}finally{s.f()}}))},data:function(){return{events:[]}},methods:{renderStars:function(t){var e="⭐",o="★";if(!(t>5)){for(var n=[],s=0;s<t;s++)n.push(e);for(var r=0;r<5-t;r++)n.push(o);return n.join(" ")}console.error("Invalid Amount of stars: ".concat(t))}}},qt=Mt,Wt=(o("78b7"),Object(u["a"])(qt,$t,jt,!1,null,"1c8d2cab",null)),Gt=Wt.exports,Yt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("auth-component"),o("nav-bar",{attrs:{fixed:!1,navbar_type:"authenticated"}}),o("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"column","margin-top":"30px"}},[o("h1",[t._v(" "+t._s(t.books&&t.books.length>0?t.books.length:"No")+" result"+t._s(1==t.books.length?"":"s")+' found for "'+t._s(t.$route.params.query)+'" ')]),o("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","margin-bottom":"20px"}},[o("search-box",{attrs:{placeholder_:"Not what you're looking for? Try again with different search terms!",height:"60px",width:"86vw",font_size:"23px",endpoint:"/search/0/#"}})],1),o("TabComponent",{on:{tabupdated:t.updateTab}})],1),t.resultFoundGlobally?o("div",{staticStyle:{width:"100%","margin-top":"30px"}},["Books Genres ISBN".includes(t.activeTab)?o("div",t._l(t.books,(function(t){return o("div",{key:t.id,staticClass:"result-box"},[o("router-link",{staticClass:"container-link",attrs:{to:"/book-info/"+t.id}},[o("search-result",{attrs:{book:t}})],1)],1)})),0):t._e(),"Users"==t.activeTab?o("div",t._l(t.books,(function(t){return o("div",{key:t.id,staticClass:"result-box"},[o("user-search-result",{attrs:{user:t}})],1)})),0):t._e(),o("div",{staticClass:"goBackTop"},[t._v(" You've reached the bottom, go "),o("a",{on:{click:function(e){return t.goTop()}}},[t._v(" back to the top ")])])]):t._e(),t.resultFoundGlobally?t._e():o("div",{staticClass:"no-result-box"},[t._m(0),t._v(" Looks like there aren't any results for that query. You might want to rephrase your search terms for better results! ")])],1)},Vt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","margin-bottom":"30px"}},[n("img",{attrs:{src:o("c0e2"),width:"400px"}})])}],Jt=o("2909"),Qt=(o("ac1f"),o("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticStyle:{width:"100%"}},[n("tr",{staticStyle:{width:"100%"}},[n("td",[n("img",{attrs:{src:t.book.image_links&&t.book.image_links.thumbnail?t.book.image_links.thumbnail:o("a73c"),height:"210px",width:"150px"}})]),n("table",{staticStyle:{height:"100%"}},[n("tr",[n("div",{staticStyle:{display:"flex","justify-content":"column",width:"100%","padding-bottom":"10px"}},[n("h3",[t._v(" "+t._s(t.book.title)+" "),n("span",{staticClass:"author"},[t._v(" "+t._s(t.book.authors?t.book.authors.join(", "):"Anonymous")+" ")])])])]),n("tr",{staticClass:"description",staticStyle:{height:"100%"}},[n("div",[t._v(" "+t._s(t.book.description?t.book.description.slice(0,700):"No description provided")+" "+t._s(t.book.description&&t.book.description.length>700?" . . . .":"")+" "),t.book.description&&t.book.description.length>700?n("router-link",{staticClass:"link",attrs:{to:"/book-info"}},[t._v(" (Read More) ")]):t._e()],1)])])])])}),Kt=[],Xt={name:"SearchResult",props:["book"]},Zt=Xt,te=(o("e4c8"),Object(u["a"])(Zt,Qt,Kt,!1,null,"0b570bec",null)),ee=te.exports,oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inputOuter",style:t.cssVars({height:t.height,width:t.width})},[n("div",{staticClass:"inputBox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"mainBox",style:"font-size: "+t.font_size+";",attrs:{type:"text",placeholder:t.placeholder_},domProps:{value:t.query},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendQuery(t.endpoint,t.query)},input:function(e){e.target.composing||(t.query=e.target.value)}}}),t.query?n("img",{attrs:{src:o("193f")},on:{click:function(e){return t.sendQuery(t.endpoint,t.query)}}}):t._e()])])},ne=[],se=(o("caad"),o("2532"),{name:"SearchBox",props:{endpoint:{type:String,default:"/search/#",validator:function(t){return t.includes("#")}},placeholder_:{type:String,default:"Search for a book"},height:{type:String,default:"95px"},width:{type:String,default:"60vw"},font_size:{type:String,default:"40px"},center:Boolean,test:String},data:function(){return{query:""}},methods:{cssVars:function(t){return{"--box-width":t.width,"--box-height":t.height}},sendQuery:function(t,e){window.location.href=t.replace("#",e).replace(" ","%20")}}}),re=se,ie=(o("7427"),Object(u["a"])(re,oe,ne,!1,null,"f33dbb2e",null)),ae=ie.exports,ce=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"inner-container"},[o("div",{staticStyle:{width:"30px","border-bottom":"1px #999999 solid"}}),t._l(t.tabs,(function(e){return o("div",{key:e},[o("div",{staticClass:"tab",class:t.active==e?"selected":"unselected",on:{click:function(o){return t.updateTab(e)}}},[t._v(" "+t._s(e)+" ")])])})),o("div",{staticStyle:{width:"100%","border-bottom":"1px #999999 solid"}})],2)])},le=[],ue={name:"TabComponent",data:function(){return{tabs:["Books","Genres","ISBN","Users"],active:"Books"}},methods:{updateTab:function(t){this.active=t,this.$emit("tabupdated",t)}}},de=ue,he=(o("b1df"),Object(u["a"])(de,ce,le,!1,null,"174dedd4",null)),fe=he.exports,ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!==t.currentUser?n("router-link",{staticClass:"container-link",attrs:{to:"/user/"+t.user.id}},[n("table",{staticStyle:{width:"100%"}},[n("tr",{staticStyle:{width:"100%"}},[n("td",{staticStyle:{width:"100px"}},[n("img",{staticClass:"profile",attrs:{src:t.user.avatar_url?t.user.avatar_url:o("a73c"),height:"80px",width:"80px"}})]),n("table",{staticStyle:{height:"100%",width:"100%"}},[n("tr",{staticStyle:{width:"100%"}},[n("div",{staticStyle:{display:"flex","justify-content":"column",width:"100%","padding-bottom":"10px"}},[n("h3",[t._v(" "+t._s(t.user.username)+" "),n("div",{staticClass:"follower"},[t._v(" "+t._s(JSON.parse(t.user.followers).length)+" Followers | "+t._s(JSON.parse(t.user.following).length)+" Following ")])])]),n("td",[n("div",{staticClass:"button-container"},[n("div",{staticClass:"follow",class:[t.user.id==t.currentUser.id?"same":"different"],on:{click:function(e){return t.follow()}}},[t._v(" "+t._s(t.user.followers.includes(t.currentUser.id)?"Unfollow":"Follow")+" ")])])])])])])])]):t._e()},pe=[],ge={name:"UserSearchResult",props:["user"],data:function(){return{currentUser:null}},created:function(){var t=this;console.log(this.user,this.currentUser),fetch(this.$backend_url+"/users/get",{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(e){t.currentUser=e,console.log(e)})).catch((function(t){console.error("current user: ",t)}))},methods:{follow:function(){var t=this;if(this.user.id!=this.currentUser.id){var e=this.user.followers.includes(this.currentUser.id)?"unfollow":"follow";fetch(this.$backend_url+"/".concat(e,"?id=").concat(this.user.id),{headers:{Authorization:window.localStorage.getItem("token")},method:"POST"}).then((function(t){return t.json()})).then((function(e){console.log("Followed:",e),t.$router.go(0)}))}}}},me=ge,be=(o("8bf7"),Object(u["a"])(me,ve,pe,!1,null,"83fd90e8",null)),we=be.exports,ke={name:"BookSearch",components:{NavBar:B,SearchResult:ee,SearchBox:ae,TabComponent:fe,AuthComponent:yt,UserSearchResult:we},data:function(){return{books:[],resultFound:!0,resultFoundGlobally:!0,num_results:20,activeTab:"Books"}},created:function(){var t=this;this.SearchBook(0,10,this.$route.params.query,!0).then((function(e){t.books=e,t.length=t.books.length,window.onscroll=function(){var e=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)+window.innerHeight===document.documentElement.offsetHeight;if(e&&("Books"==t.activeTab||"Genres"==t.activeTab)){var o="Books"==t.activeTab?"subject:#":"#";t.SearchBook(t.num_results,5,o.replace("#",t.$route.params.query),!1).then((function(e){var o;t.resultFound&&(o=t.books).push.apply(o,Object(Jt["a"])(e)),t.length=t.books.length,t.num_results+=5}))}}}))},methods:{goTop:function(){window.scrollTo(0,0)},SearchBook:function(t,e,o,n){var s=this;return Object(k["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(s.$backend_url,"/books/search?query=").concat(o,"&download=").concat(s.$route.params.download_only,"&limit=").concat(e,"&offset=").concat(t),{headers:{Authorization:window.localStorage.getItem("token")}});case 2:return i=r.sent,n?s.resultFoundGlobally=200==i.status:s.resultFound=200==i.status,r.abrupt("return",i.json());case 5:case"end":return r.stop()}}),r)})))()},SearchUser:function(t){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function o(){var n,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,fetch("".concat(e.$backend_url,"/users/search?username=").concat(t));case 2:return n=o.sent,e.resultFoundGlobally=200==n.status&&n.ok,s=n.json(),o.abrupt("return",s);case 6:case"end":return o.stop()}}),o)})))()},updateTab:function(t){var e=this;"ISBN"==t?this.SearchBook(0,10,"isbn:".concat(this.$route.params.query),!0).then((function(t){e.books=t,e.activeTab="ISBN"})):"Books"==t?this.SearchBook(0,20,"".concat(this.$route.params.query),!0).then((function(t){e.books=t,e.activeTab="Books"})):"Genres"==t?this.SearchBook(0,20,"subject:".concat(this.$route.params.query),!0).then((function(t){e.books=t,e.activeTab="Genres"})):"Users"==t&&this.SearchUser(this.$route.params.query).then((function(t){e.books=t,e.activeTab="Users"}))}}},_e=ke,ye=(o("5739"),Object(u["a"])(_e,Yt,Vt,!1,null,"495efa9e",null)),Ce=ye.exports,xe=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main"},[o("auth-component"),o("nav-bar",{attrs:{navbar_type:"authenticated",fixed:!1}}),o("div",{staticClass:"searchBox",style:t.scaleFont(50)},[t._v(" Explore our wide collection of Books! "),o("search-box",{attrs:{endpoint:"/search/"+(t.downloadOnly?1:0)+"/#",height:t.scale(75),width:t.boxSize,font_size:t.scale(35)}}),o("p",{style:t.scaleFont(23)},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.downloadOnly,expression:"downloadOnly"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.downloadOnly)?t._i(t.downloadOnly,null)>-1:t.downloadOnly},on:{change:function(e){var o=t.downloadOnly,n=e.target,s=!!n.checked;if(Array.isArray(o)){var r=null,i=t._i(o,r);n.checked?i<0&&(t.downloadOnly=o.concat([r])):i>-1&&(t.downloadOnly=o.slice(0,i).concat(o.slice(i+1)))}else t.downloadOnly=s}}}),t._v(" Only show books which are available for download ")]),o("recommendations")],1)],1)},Se=[],Be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticStyle:{width:"100%"}},[t._v("Recommended for you -")]),n("div",{staticClass:"recommendations-container"},t._l(t.recommendations.slice(0,t.recommendations.length/2),(function(t){return n("div",{key:t.id,staticClass:"book"},[n("router-link",{attrs:{to:"/book-info/"+t.id}},[n("img",{staticClass:"cover",attrs:{src:t.image_links&&t.image_links.thumbnail?t.image_links.thumbnail:o("a73c")}})])],1)})),0),n("div",{staticClass:"recommendations-container"},t._l(t.recommendations.slice(t.recommendations.length/2,t.recommendations.length),(function(t){return n("div",{key:t.id,staticClass:"book"},[n("router-link",{attrs:{to:"/book-info/"+t.id}},[n("img",{staticClass:"cover",attrs:{src:t.image_links&&t.image_links.thumbnail?t.image_links.thumbnail:o("a73c")}})])],1)})),0),t.recommended?t._e():n("img",{attrs:{src:o("9c93")}})])},$e=[],je={name:"Recommendations",data:function(){return{recommended:!1,recommendations:[]}},created:function(){var t=this,e=window.localStorage.getItem("token");fetch(this.$backend_url+"/users/recommendations",{headers:{Authorization:e}}).then((function(t){return t.ok?t.json():null})).then((function(o){if(null!=o&&0!=o.length){var n="Computer Science",s=0;for(var r in o)o.hasOwnProperty(r)&&o[r]>s&&(n=r,s=o[r]);fetch(t.$backend_url+"/books/search?query=subject:".concat(n,"&limit=16"),{headers:{Authorization:e}}).then((function(e){return e.ok?(t.recommended=!0,e.json()):(t.recommended=!1,null)})).then((function(e){null!=e&&(t.recommendations=e),console.log(t.recommendations),window.innerWidth<=600&&(t.recommended=!1)}))}}))}},Te=je,De=(o("4645"),Object(u["a"])(Te,Be,$e,!1,null,"03b4a5bf",null)),Oe=De.exports,Ue={name:"Explore",components:{NavBar:B,SearchBox:ae,AuthComponent:yt,Recommendations:Oe},data:function(){return{downloadOnly:!1,boxSize:screen.width<=760?"79vw":"60vw"}},methods:{scale:function(t){return"".concat(window.innerHeight*t/796,"px")},scaleFont:function(t){return{"font-size":"".concat(window.innerHeight*t/796,"px")}}}},Re=Ue,Ie=(o("c613"),Object(u["a"])(Re,xe,Se,!1,null,"147ac3dd",null)),Ee=Ie.exports,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.infoLoaded?n("div",[n("auth-component"),n("nav-bar",{attrs:{navbar_type:"authenticated",currentUser:t.currentUser}}),n("main",[n("div",{staticClass:"left"},[n("div",{staticClass:"userInfo"},[n("img",{attrs:{src:t.userInfo.pfp?t.userInfo.pfp:o("5b68")}}),n("div",{staticClass:"userInfoText",style:t.scaleFont(50)},[n("p",{staticClass:"username"},[t._v(" "+t._s(t.userInfo.name)+" "),t.userInfo.id!==t.currentUser.id?n("a",{on:{click:function(e){return t.follow(t.$router,t.$backend_url,t.userInfo,t.currentUser)}}},[t._v(" "+t._s(t.userInfo.followers.includes(t.currentUser.id)?"Unfollow":"Follow")+" ")]):t._e(),t.userInfo.id<=4&&t.userInfo.id>0?n("span",{staticStyle:{color:"grey","font-size":"20px","margin-top":"15px"}},[t._v(" BookSplore Admin ")]):t._e()]),n("p",{staticClass:"followersEtc"},[t._v(" "+t._s(t.userInfo.total_reviews)+" Reviews "),n("a",{on:{click:function(e){t.showList1=!t.showList1,t.showList2=!1}}},[t._v(" | "+t._s(t.userInfo.followers.length)+" Followers "),n("transition",{attrs:{name:"slide-fade"}},[t.showList1?n("div",{staticClass:"hoverList hoverList1"},[n("floating-list",{attrs:{title:"Followers",items:t.userInfo.followersArr}})],1):t._e()])],1),n("a",{on:{click:function(e){t.showList2=!t.showList2,t.showList1=!1}}},[t._v(" | "+t._s(t.userInfo.following.length)+" Following "),n("transition",{attrs:{name:"slide-fade"}},[t.showList2?n("div",{staticClass:"hoverList hoverList2"},[n("floating-list",{attrs:{title:"Following",items:t.userInfo.followingArr}})],1):t._e()])],1)])])]),t.reviewsFetched?n("div",{staticClass:"reviewsDiv",on:{click:function(e){t.showList2=!1,t.showList1=!1}}},[t._v(" Recent Reviews "),t.reviews.length?n("div",{staticClass:"reviews"},[t._l(t.reviews,(function(e,o){return n("Review",{key:o,attrs:{type:"user",raw_review:e,coverType:"user",descLength:280,currentUser:t.currentUser}})})),n("p",{staticClass:"reviewPadding"})],2):n("div",{staticClass:"noReviews"},[t._v(" This user has not reviewed any books yet ")])]):t._e()]),t.booksFetched?n("div",{staticClass:"recentBooksDiv",on:{click:function(e){t.showList2=!1,t.showList1=!1}}},[n("p",{staticClass:"recentTitle"},[t._v("Recent Books")]),t.recentBooks.length?n("div",{staticClass:"recentBooks"},t._l(t.recentBooks.slice(0,t.maxRecentBooks),(function(e,o){return n("a",{key:o,attrs:{href:e.link}},[n("Cover",{attrs:{width:t.coverWidth,height:t.coverHeight,imgUrl:e.cover}})],1)})),0):n("div",{staticClass:"noRecentBooks"},[t._v(" User has not viewed any books recently ")])]):t._e()])],1):t._e()},Ae=[],Pe=(o("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"floatingMain"},[n("div",{staticClass:"listTitle"},[t._v(t._s(t.title))]),n("div",{staticClass:"flist"},t._l(t.items,(function(e,s){return n("a",{key:s,attrs:{href:"/user/"+e.id}},[n("div",{staticClass:"listItem"},[n("img",{attrs:{src:e.avatar_url?e.avatar_url:o("5b68")}}),t._v(" "+t._s(e.username)+" ")])])})),0)])}),Fe=[],He={name:"FloatingList",props:["title","items"],methods:{go:function(t,e){t.push(e)}}},ze=He,Ne=(o("c04f"),Object(u["a"])(ze,Pe,Fe,!1,null,"54bb99ad",null)),Me=Ne.exports,qe={name:"User",components:{NavBar:B,Review:it,Cover:G,FloatingList:Me,AuthComponent:yt},data:function(){return{reviews:[],recentBooks:[],maxRecentBooks:screen.width<=760?4:8,userInfo:{},currentUser:{},showList1:!1,showList2:!1,infoLoaded:!1,booksFetched:!0,reviewsFetched:!1,coverHeight:screen.width<=760?"55vw":"15vw",coverWidth:screen.width<=760?"32vw":"10vw"}},methods:{follow:function(t,e,o,n){var s=o.followers.includes(n.id)?"unfollow":"follow";fetch(e+"/".concat(s,"?id=").concat(o.id),{headers:{Authorization:window.localStorage.getItem("token")},method:"POST"}).then((function(t){return t.json()})).then((function(e){console.log(e),t.go(0)}))},scaleFont:function(t){return{"font-size":"".concat(window.innerHeight*t/796,"px")}}},created:function(){var t=this,e=this.$route.params.id;fetch(this.$backend_url+"/users/get?id=".concat(e),{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(e){fetch(t.$backend_url+"/follow/get?id=".concat(e.id),{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(e){return 200!=e.status&&t.$router.push("/404"),e.json()})).then((function(o){t.userInfo={name:e.username,pfp:e.avatar_url,id:e.id,followEndpoint:t.$backend_url+"/follow?id=".concat(e.id),followersArr:o.followers?o.followers:[],followingArr:o.following?o.following:[],followers:e.followers,following:e.following,total_reviews:e.total_reviews},fetch(t.$backend_url+"/books/reviews?user_id=".concat(t.userInfo.id)).then((function(t){return t.json()})).then((function(e){t.reviews=e.reverse(),t.reviewsFetched=!0,t.infoLoaded=!0})).catch((function(t){console.error("reviews :",t)})),fetch(t.$backend_url+"/users/recent-books?user_id=".concat(t.userInfo.id)).then((function(t){return t.json()})).then((function(e){var o=[];e.forEach((function(t){o.push({cover:t.image_links?t.image_links.thumbnail:null,link:"/book-info/".concat(t.book_id)})})),t.recentBooks=o}))})).catch((function(e){console.error("followers: ",e),t.$router.push("/404")}))})).catch((function(t){console.error("main",t)})),fetch(this.$backend_url+"/users/get",{headers:{Authorization:window.localStorage.getItem("token")}}).then((function(t){return t.json()})).then((function(e){t.currentUser=e,console.log(e)})).catch((function(t){console.error("current user: ",t)}))}},We=qe,Ge=(o("dd5c"),Object(u["a"])(We,Le,Ae,!1,null,"54a1b384",null)),Ye=Ge.exports,Ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",color:"white",display:"flex","flex-direction":"column"}},[n("h1",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Page Not Found")]),n("h4",{staticStyle:{width:"100%","text-align":"center"}},[t._v(" Looks like you followed a broken link. Click "),n("router-link",{attrs:{to:"/dashboard"}},[t._v("here")]),t._v(" to go back to safety. ")],1),n("img",{attrs:{src:o("5863"),height:t.height-200}})])},Je=[],Qe={name:"NotFoundPage",data:function(){return{height:window.innerHeight}}},Ke=Qe,Xe=(o("623c"),Object(u["a"])(Ke,Ve,Je,!1,null,"03638124",null)),Ze=Xe.exports,to=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%"}},[n("nav-bar",{attrs:{fixed:!1,navbar_type:"authenticated"}}),n("div",{staticClass:"container"},[n("div",{staticClass:"previous-page",staticStyle:{display:"flex","justify-self":"center"}},[n("img",{attrs:{src:o("694f")},on:{click:function(e){return t.movePage(-1)}}})]),n("div",{style:t.containerStyles(),attrs:{id:"view"}}),n("div",{staticClass:"next-page",staticStyle:{display:"flex","justify-self":"center"}},[n("img",{attrs:{src:o("694f")},on:{click:function(e){return t.movePage(1)}}})])]),n("div",{staticClass:"note"},[t._v(" Note: This webreader is provided by the Google API ")])],1)},eo=[],oo={name:"ReadOnline",components:{NavBar:B},mounted:function(){google.books.load(),google.books.setOnLoadCallback(this.initializeWebReader)},data:function(){return{viewer:null}},methods:{initializeWebReader:function(){var t=this;this.viewer=new google.books.DefaultViewer(document.getElementById("view")),this.viewer.load("ISBN:".concat(this.$route.params.isbn),(function(){alert("Oops! It looks like this book isn't available to read!"),t.$router.push("/explore")}))},containerStyles:function(){return{margin:"auto",width:"".concat(.65*window.innerWidth,"px"),height:"".concat(window.innerHeight-100,"px"),"padding-top":"30px"}},movePage:function(t){1==t?this.viewer.nextPage():this.viewer.previousPage()}}},no=oo,so=(o("4254"),Object(u["a"])(no,to,eo,!1,null,"1f586a74",null)),ro=so.exports;n["a"].use(m["a"]);var io=[{path:"/",name:"Home",component:L},{path:"/book-info/:id",name:"BookInfo",component:Bt},{path:"/dashboard",name:"Dashboard",component:Gt},{path:"/search/:download_only/:query/",name:"Search",component:Ce},{path:"/explore",name:"Explore",component:Ee},{path:"/search",name:"Search_Explore",component:Ee},{path:"/user/:id",name:"UserProfile",component:Ye},{path:"/read/:isbn",name:"ReadOnline",component:ro},{path:"/*",name:"NotFoundPage",component:Ze}],ao=new m["a"]({mode:"history",base:"/",routes:io}),co=ao,lo=o("0628"),uo=o.n(lo);n["a"].use(uo.a),n["a"].config.productionTip=!1,n["a"].prototype.$backend_url="/api",new n["a"]({router:co,render:function(t){return t(g)}}).$mount("#app")},5739:function(t,e,o){"use strict";o("480b")},5863:function(t,e,o){t.exports=o.p+"img/404_error.6695af99.svg"},"59c1":function(t,e,o){},"5b68":function(t,e,o){t.exports=o.p+"img/ProfilePicture.35cf15ed.svg"},"623c":function(t,e,o){"use strict";o("4339")},"694f":function(t,e,o){t.exports=o.p+"img/submitArrow.0fd6871b.svg"},"6c1f":function(t,e,o){},"6d31":function(t,e,o){},7427:function(t,e,o){"use strict";o("b317")},"760d":function(t,e,o){"use strict";o("2437")},"78b7":function(t,e,o){"use strict";o("bc6d")},"7ccd":function(t,e,o){},"8bf7":function(t,e,o){"use strict";o("4b80")},"918b":function(t,e,o){t.exports=o.p+"img/grayStar.807d24b7.svg"},9666:function(t,e,o){"use strict";o("59c1")},"9af0":function(t,e,o){},"9c93":function(t,e,o){t.exports=o.p+"img/searching.b5f3c3fe.svg"},"9e0c":function(t,e,o){},"9ffe":function(t,e,o){},a73c:function(t,e,o){t.exports=o.p+"img/BookSploreIcon.2a5a0499.svg"},aced:function(t,e,o){},aec0:function(t,e,o){"use strict";o("081d")},b1df:function(t,e,o){"use strict";o("9ffe")},b317:function(t,e,o){},b9d5:function(t,e,o){"use strict";o("c3d6")},bc6d:function(t,e,o){},c04f:function(t,e,o){"use strict";o("0e1a")},c0e2:function(t,e,o){t.exports=o.p+"img/NoData.1d10f376.svg"},c3d6:function(t,e,o){},c613:function(t,e,o){"use strict";o("7ccd")},d33c:function(t,e,o){"use strict";o("6d31")},d7c9:function(t,e,o){"use strict";o("9e0c")},da9e:function(t,e,o){t.exports=o.p+"img/goldenStar.5f3580c0.svg"},dd5c:function(t,e,o){"use strict";o("6c1f")},e03b:function(t,e,o){},e4c8:function(t,e,o){"use strict";o("aced")},e7af:function(t,e,o){},e980:function(t,e,o){"use strict";o("1d3b")},eac9:function(t,e,o){},ed3a:function(t,e,o){t.exports=o.p+"img/delete.314534a0.png"},fea6:function(t,e,o){"use strict";o("40af")}});
//# sourceMappingURL=app.bb3d01df.js.map